{% extends 'common/layout.html' %}

{% block js %}
    {{ block.super }}
    <script>
        $(function () {
            $("#device-filter").on("change", "input", function () {
                $(this).closest("form").submit();
            });
        });
    </script>
{% endblock %}

<!-- CONTENT -->
<div class="clearfix"></div>

{% block content %}
<div id="device-filter" class="pull-left">
    Sort by:
    <form action="" class="filter-form">
        {% for field in form %}
            {{ field }}
        {% endfor %}
    </form>
</div>

<div id="device-view" class="pull-right">
    <a id="device-list-view" href="#list" class="active">List</a>
    /
    <a id="device-map-view" href="#map">Map</a>
</div>
<div class="clearfix"></div>

<ul id="device-list">
{% for device in devices %}
    <li>
        {% if forloop.counter|divisibleby:6 %}
            <div class="clearfix"></div>
        {% else %}
            <div class="device">
                <div class="image">
                    <a href="{% url 'single_device_view' device.pk %}">
                        <img src="{{ device.image.url }}" />
                    </a>
                </div>
                <div class="name">
                    <a href="{% url 'single_device_view' device.pk %}">
                        {{ device }}
                    </a>
                </div>
                <div class="info">
                    <span class="os">{{ device.os }}</span>
                    {{ device.version }}
                </div>
                <div class="owner img-circle">
                    {% if device.employer %}
                        <a href="{% url 'single_employe_view' device.employer.id %}">
                            <img src="{{ device.employer.image.url }}" class="img-circle" />
                        </a>
                    {% endif %}
                </div>
            </div>
        {% endif %}
    </li>
{% endfor %}
</ul>

{% include "map.html" %}

<div class="clearfix"></div>
{% endblock %}
<!-- /CONTENT -->
